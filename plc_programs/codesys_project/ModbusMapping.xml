<?xml version="1.0" encoding="utf-8"?>
<ModbusConfiguration xmlns="http://www.3s-software.com/ModbusTCP">
  <ServerConfiguration>
    <Port>502</Port>
    <MaxConnections>5</MaxConnections>
    <Timeout>5000</Timeout>
    <UnitId>1</UnitId>
  </ServerConfiguration>
  
  <!-- Coil Mappings (Function Code 01/05/15) -->
  <CoilMappings>
    <!-- Process Control Signals -->
    <Mapping ModbusAddress="1000" PLCAddress="%QX125.0" Name="PLC_CYCLE_STOPPED" 
             Description="PLC cycle stopped status" />
    <Mapping ModbusAddress="1001" PLCAddress="%QX125.1" Name="PLC_CYCLE_RUNNING" 
             Description="PLC cycle running status" />
    <Mapping ModbusAddress="1002" PLCAddress="%QX125.2" Name="PICK_ERROR" 
             Description="Pick operation error status" />
    <Mapping ModbusAddress="1003" PLCAddress="%QX125.3" Name="PICK_TO_ASSEMBLY_IN_PROCESS" 
             Description="Pick to assembly in process" />
    <Mapping ModbusAddress="1004" PLCAddress="%QX125.4" Name="PICK_TO_ASSEMBLY_COMPLETE" 
             Description="Pick to assembly complete" />
    <Mapping ModbusAddress="1005" PLCAddress="%QX125.5" Name="PICK_TO_RECEIVING_IN_PROCESS" 
             Description="Pick to receiving in process" />
    <Mapping ModbusAddress="1006" PLCAddress="%QX125.6" Name="PICK_TO_RECEIVING_COMPLETE" 
             Description="Pick to receiving complete" />
    <Mapping ModbusAddress="1007" PLCAddress="%QX125.7" Name="PICK_TO_WAREHOUSE_IN_PROCESS" 
             Description="Pick to warehouse in process" />
    <Mapping ModbusAddress="1008" PLCAddress="%QX126.0" Name="PICK_TO_WAREHOUSE_COMPLETE" 
             Description="Pick to warehouse complete" />
    
    <!-- Pick Bin Controls (ERP Controlled) -->
    <Mapping ModbusAddress="2000" PLCAddress="%QX250.0" Name="PICK_BIN_01" 
             Description="Pick bin 01 selection" Access="ReadWrite" />
    <Mapping ModbusAddress="2001" PLCAddress="%QX250.1" Name="PICK_BIN_02" 
             Description="Pick bin 02 selection" Access="ReadWrite" />
    <Mapping ModbusAddress="2002" PLCAddress="%QX250.2" Name="PICK_BIN_03" 
             Description="Pick bin 03 selection" Access="ReadWrite" />
    <Mapping ModbusAddress="2003" PLCAddress="%QX250.3" Name="PICK_BIN_04" 
             Description="Pick bin 04 selection" Access="ReadWrite" />
    <Mapping ModbusAddress="2004" PLCAddress="%QX250.4" Name="PICK_BIN_05" 
             Description="Pick bin 05 selection" Access="ReadWrite" />
    <Mapping ModbusAddress="2005" PLCAddress="%QX250.5" Name="PICK_BIN_06" 
             Description="Pick bin 06 selection" Access="ReadWrite" />
    <Mapping ModbusAddress="2006" PLCAddress="%QX250.6" Name="PICK_BIN_07" 
             Description="Pick bin 07 selection" Access="ReadWrite" />
    <Mapping ModbusAddress="2007" PLCAddress="%QX250.7" Name="PICK_BIN_08" 
             Description="Pick bin 08 selection" Access="ReadWrite" />
    <Mapping ModbusAddress="2008" PLCAddress="%QX251.0" Name="PICK_BIN_09" 
             Description="Pick bin 09 selection" Access="ReadWrite" />
    <Mapping ModbusAddress="2009" PLCAddress="%QX251.1" Name="PICK_BIN_10" 
             Description="Pick bin 10 selection" Access="ReadWrite" />
    <Mapping ModbusAddress="2010" PLCAddress="%QX251.2" Name="PICK_BIN_11" 
             Description="Pick bin 11 selection" Access="ReadWrite" />
    <Mapping ModbusAddress="2011" PLCAddress="%QX251.3" Name="PICK_BIN_12" 
             Description="Pick bin 12 selection" Access="ReadWrite" />
    
    <!-- Station Controls (ERP Controlled) -->
    <Mapping ModbusAddress="2020" PLCAddress="%QX252.4" Name="TO_RECEIVING_STA_1" 
             Description="To receiving station 1" Access="ReadWrite" />
    <Mapping ModbusAddress="2021" PLCAddress="%QX252.5" Name="FROM_RECEIVING_STA_1" 
             Description="From receiving station 1" Access="ReadWrite" />
    <Mapping ModbusAddress="2022" PLCAddress="%QX252.6" Name="TO_ASSEMBLY_STA_2" 
             Description="To assembly station 2" Access="ReadWrite" />
    <Mapping ModbusAddress="2023" PLCAddress="%QX252.7" Name="FROM_ASSEMBLY_STA_2" 
             Description="From assembly station 2" Access="ReadWrite" />
  </CoilMappings>
  
  <!-- Holding Register Mappings (Function Code 03/06/16) -->
  <HoldingRegisterMappings>
    <!-- Statistics and Monitoring -->
    <Mapping ModbusAddress="100" PLCAddress="%MW100" Name="CYCLE_COUNTER" 
             Description="System cycle counter" />
    <Mapping ModbusAddress="101" PLCAddress="%MW101" Name="PICK_OPERATIONS_TOTAL" 
             Description="Total pick operations performed" />
    <Mapping ModbusAddress="102" PLCAddress="%MW102" Name="ASSEMBLY_PICKS" 
             Description="Number of assembly picks" />
    <Mapping ModbusAddress="103" PLCAddress="%MW103" Name="RECEIVING_PICKS" 
             Description="Number of receiving picks" />
    <Mapping ModbusAddress="104" PLCAddress="%MW104" Name="WAREHOUSE_PICKS" 
             Description="Number of warehouse picks" />
    <Mapping ModbusAddress="105" PLCAddress="%MW105" Name="ERROR_COUNT" 
             Description="Total error count" />
    <Mapping ModbusAddress="106" PLCAddress="%MW106" Name="UPTIME_SECONDS" 
             Description="System uptime in seconds" />
    <Mapping ModbusAddress="107" PLCAddress="%MW107" Name="SYSTEM_STATUS" 
             Description="System status (0=Stopped, 1=Running, 2=Error, 3=Manual)" />
    <Mapping ModbusAddress="108" PLCAddress="%MW108" Name="CURRENT_BIN_SELECTION" 
             Description="Current bin selection (1-12, 0=none)" />
    
    <!-- Robot Position Registers -->
    <Mapping ModbusAddress="109" PLCAddress="%MW109" Name="ROBOT_POSITION_X" 
             Description="Robot X coordinate position" />
    <Mapping ModbusAddress="110" PLCAddress="%MW110" Name="ROBOT_POSITION_Y" 
             Description="Robot Y coordinate position" />
    <Mapping ModbusAddress="111" PLCAddress="%MW111" Name="ROBOT_POSITION_Z" 
             Description="Robot Z coordinate position" />
    
    <!-- RFID Data Registers (32-bit values split across two registers) -->
    <Mapping ModbusAddress="200" PLCAddress="%MD200" Name="RFID_READER1_TAG_ID_LOW" 
             Description="RFID Reader 1 Tag ID (lower 16 bits)" />
    <Mapping ModbusAddress="201" PLCAddress="%MD200" Name="RFID_READER1_TAG_ID_HIGH" 
             Description="RFID Reader 1 Tag ID (upper 16 bits)" />
    <Mapping ModbusAddress="202" PLCAddress="%MD202" Name="RFID_READER2_TAG_ID_LOW" 
             Description="RFID Reader 2 Tag ID (lower 16 bits)" />
    <Mapping ModbusAddress="203" PLCAddress="%MD202" Name="RFID_READER2_TAG_ID_HIGH" 
             Description="RFID Reader 2 Tag ID (upper 16 bits)" />
    <Mapping ModbusAddress="204" PLCAddress="%MW204" Name="RFID_READER1_STATUS" 
             Description="RFID Reader 1 status (0=Idle, 1=Reading, 2=Valid, 3=Error)" />
    <Mapping ModbusAddress="205" PLCAddress="%MW205" Name="RFID_READER2_STATUS" 
             Description="RFID Reader 2 status (0=Idle, 1=Reading, 2=Valid, 3=Error)" />
    
    <!-- Conveyor Status Registers -->
    <Mapping ModbusAddress="300" PLCAddress="%MW300" Name="CONVEYOR1_STATUS" 
             Description="Conveyor 1 status (0=Stopped, 1=Running, 2=Fault)" />
    <Mapping ModbusAddress="301" PLCAddress="%MW301" Name="CONVEYOR2_STATUS" 
             Description="Conveyor 2 status" />
    <Mapping ModbusAddress="302" PLCAddress="%MW302" Name="CONVEYOR3_STATUS" 
             Description="Conveyor 3 status" />
    <Mapping ModbusAddress="303" PLCAddress="%MW303" Name="CONVEYOR4_STATUS" 
             Description="Conveyor 4 status" />
    <Mapping ModbusAddress="304" PLCAddress="%MW304" Name="CONVEYOR1_SPEED" 
             Description="Conveyor 1 speed setpoint (mm/min)" />
    <Mapping ModbusAddress="305" PLCAddress="%MW305" Name="CONVEYOR2_SPEED" 
             Description="Conveyor 2 speed setpoint (mm/min)" />
    <Mapping ModbusAddress="306" PLCAddress="%MW306" Name="CONVEYOR3_SPEED" 
             Description="Conveyor 3 speed setpoint (mm/min)" />
    <Mapping ModbusAddress="307" PLCAddress="%MW307" Name="CONVEYOR4_SPEED" 
             Description="Conveyor 4 speed setpoint (mm/min)" />
  </HoldingRegisterMappings>
  
  <!-- Discrete Input Mappings (Function Code 02) -->
  <DiscreteInputMappings>
    <!-- Physical I/O Status -->
    <Mapping ModbusAddress="10000" PLCAddress="%IX0.0" Name="EMERGENCY_STOP" 
             Description="Emergency stop button status" />
    <Mapping ModbusAddress="10001" PLCAddress="%IX0.1" Name="MANUAL_RESET" 
             Description="Manual reset button status" />
    <Mapping ModbusAddress="10002" PLCAddress="%IX0.2" Name="START_BUTTON" 
             Description="Start button status" />
    <Mapping ModbusAddress="10003" PLCAddress="%IX0.3" Name="STOP_BUTTON" 
             Description="Stop button status" />
    
    <!-- Robot Status -->
    <Mapping ModbusAddress="10020" PLCAddress="%IX2.0" Name="ROBOT_HOME_POSITION" 
             Description="Robot at home position" />
    <Mapping ModbusAddress="10021" PLCAddress="%IX2.1" Name="ROBOT_MOVING" 
             Description="Robot in motion" />
    <Mapping ModbusAddress="10022" PLCAddress="%IX2.2" Name="ROBOT_AT_CONVEYOR" 
             Description="Robot at conveyor position" />
    <Mapping ModbusAddress="10023" PLCAddress="%IX2.3" Name="ROBOT_GRIPPER_OPEN" 
             Description="Robot gripper open feedback" />
    <Mapping ModbusAddress="10024" PLCAddress="%IX2.4" Name="ROBOT_GRIPPER_CLOSED" 
             Description="Robot gripper closed feedback" />
    <Mapping ModbusAddress="10025" PLCAddress="%IX2.5" Name="ROBOT_ERROR_STATUS" 
             Description="Robot error status" />
  </DiscreteInputMappings>
  
  <!-- Input Register Mappings (Function Code 04) -->
  <InputRegisterMappings>
    <!-- Diagnostic Information -->
    <Mapping ModbusAddress="30001" PLCAddress="%MW1000" Name="PLC_SCAN_TIME" 
             Description="PLC scan time in microseconds" />
    <Mapping ModbusAddress="30002" PLCAddress="%MW1001" Name="PLC_CPU_USAGE" 
             Description="PLC CPU usage percentage" />
    <Mapping ModbusAddress="30003" PLCAddress="%MW1002" Name="PLC_MEMORY_USAGE" 
             Description="PLC memory usage percentage" />
  </InputRegisterMappings>
  
</ModbusConfiguration>